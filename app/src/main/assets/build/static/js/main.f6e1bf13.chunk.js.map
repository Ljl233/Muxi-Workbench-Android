{"version":3,"sources":["App.js","index.js"],"names":["App","props","handleEditorChange","content","setState","contentValue","uploadHandler","blobInfo","success","failure","xhr","XMLHttpRequest","token","window","android","getToken","withCredentials","open","setRequestHeader","onload","status","console","log","responseText","json","JSON","parse","image_url","formData","FormData","append","blob","send","state","titleValue","getContent","bind","getTitle","handleInputChange","event","this","target","value","getStatusTitle","editHeight","document","documentElement","clientHeight","width","clientWidth","initContent","getEdits","placeholder","onChange","style","height","fontSize","className","initialValue","init","mobile","menubar","skin","language","language_url","powerpaste_allow_local_images","images_upload_handler","paste_data_images","skin_url","textpattern_patterns","start","end","format","cmd","replacement","plugins","toolbar","toolbar_location","toolbar_mode","onEditorChange","React","Component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.f6e1bf13.chunk.js","sourcesContent":["import React from 'react';\nimport {Editor} from '@tinymce/tinymce-react';\nimport './App.css'\n\nimport tinymce from 'tinymce/tinymce';\nimport \"tinymce/themes/silver/index\";\nimport \"tinymce/plugins/image\";\nimport \"tinymce/plugins/lists\";\nimport \"tinymce/plugins/paste\";\nimport \"tinymce/plugins/table\";\nimport \"tinymce/plugins/imagetools\";\nimport \"tinymce/plugins/codesample\";\nimport \"tinymce/plugins/advlist\";\nimport \"tinymce/plugins/wordcount\";\nimport \"tinymce/plugins/textpattern\";\nimport \"tinymce/plugins/tabfocus\";\nimport \"tinymce/plugins/link\";\nimport \"tinymce/themes/mobile\"\n\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            contentValue: '',\n            titleValue: ''\n        }\n        this.getContent = this.getContent.bind(this)\n        this.getTitle = this.getTitle.bind(this)\n        this.handleInputChange = this.handleInputChange.bind(this)\n    }\n\n    handleEditorChange = (content) => {\n        this.setState({\n            contentValue: content\n        })\n    }\n\n    handleInputChange(event) {\n        this.setState({\n            titleValue: event.target.value\n        })\n    }\n\n    getContent() {\n        return (this.state.contentValue)\n    }\n\n    getTitle() {\n        return (this.state.titleValue)\n    }\n\n    componentDidMount() {\n        window.getContent = this.getContent\n        window.getTitle = this.getTitle\n        this.setState({\n            titleValue: window.android.getStatusTitle()\n            // titleValue: ''\n        })\n    }\n\n    uploadHandler = (blobInfo, success, failure) => {\n        const xhr = new XMLHttpRequest();\n        const token = window.android.getToken()\n        // const token = 'eyJpYXQiOjE1ODEzMzc3NTEsImV4cCI6MTg5NjY5Nzc1MSwiYWxnIjoiSFMyNTYifQ.eyJjb25maXJtIjoxMTV9.3E1oeNotLWE276mRmhsVfBtNQwQTAWpMhiNFEB6LEPY'\n        xhr.withCredentials = false;\n\n\n        xhr.open(\"POST\", \"http://work.muxi-tech.xyz/api/v1.0/editor/image/\");\n        xhr.setRequestHeader(\"token\", token);\n        xhr.onload = () => {\n            if (xhr.status !== 200) {\n                failure(`HTTP Error: ${xhr.status}`);\n                return;\n            }\n            console.log(xhr.responseText)\n            const json = JSON.parse(xhr.responseText);\n\n            if (!json || typeof json.image_url !== \"string\") {\n                failure(`Invalid JSON: ${xhr.responseText}`);\n                return;\n            }\n\n            success(json.image_url);\n        };\n\n        const formData = new FormData();\n        formData.append(\"image\", blobInfo.blob());\n        xhr.send(formData);\n    };\n\n\n    render() {\n        const editHeight = document.documentElement.clientHeight - 75\n        const width = document.documentElement.clientWidth\n        const initContent = window.android.getEdits()\n        // const initContent = \"<p>123123</p>\"\n        const {titleValue} = this.state\n        return (\n            <div>\n                <input\n                    placeholder=\"请输入标题\"\n                    value={titleValue}\n                    onChange={this.handleInputChange}\n                    style={{\n                        width: width,\n                        height: '61px',\n                        fontSize: '20px'\n                    }}\n                />\n                <div className=\"editor\">\n                    <Editor\n                        initialValue={initContent}\n                        init={{\n                            mobile: {\n                                menubar: true,\n                                height: editHeight,\n                                skin: 'oxide',\n                                language: \"zh_CN\",\n                                language_url: \"http://static.muxixyz.com/workbench/lang/zh_CN.js\",\n                                powerpaste_allow_local_images: true,\n                                images_upload_handler: this.uploadHandler,\n                                paste_data_images: true,\n                                skin_url: \"http://static.muxixyz.com/workbench/skins/ui/oxide\",\n                                textpattern_patterns: [\n                                    {start: \"*\", end: \"*\", format: \"italic\"},\n                                    {start: \"**\", end: \"**\", format: \"bold\"},\n                                    {\n                                        start: \"~\",\n                                        end: \"~\",\n                                        cmd: \"createLink\",\n                                        value: \"http://work.muxi-tech.xyz\"\n                                    },\n                                    {start: \"#\", format: \"h1\"},\n                                    {start: \"##\", format: \"h2\"},\n                                    {start: \"###\", format: \"h3\"},\n                                    {start: \"####\", format: \"h4\"},\n                                    {start: \"#####\", format: \"h5\"},\n                                    {start: \"######\", format: \"h6\"},\n                                    {start: \"* \", cmd: \"InsertUnorderedList\"},\n                                    {start: \"- \", cmd: \"InsertUnorderedList\"},\n                                    {start: \"+ \", cmd: \"InsertUnorderedList\"},\n                                    {\n                                        start: \"1. \",\n                                        cmd: \"InsertOrderedList\",\n                                        value: {\"list-style-type\": \"decimal\"}\n                                    },\n                                    {\n                                        start: \"1) \",\n                                        cmd: \"InsertOrderedList\",\n                                        value: {\"list-style-type\": \"decimal\"}\n                                    },\n                                    {\n                                        start: \"a. \",\n                                        cmd: \"InsertOrderedList\",\n                                        value: {\"list-style-type\": \"lower-alpha\"}\n                                    },\n                                    {\n                                        start: \"a) \",\n                                        cmd: \"InsertOrderedList\",\n                                        value: {\"list-style-type\": \"lower-alpha\"}\n                                    },\n                                    {\n                                        start: \"i. \",\n                                        cmd: \"InsertOrderedList\",\n                                        value: {\"list-style-type\": \"lower-roman\"}\n                                    },\n                                    {\n                                        start: \"i) \",\n                                        cmd: \"InsertOrderedList\",\n                                        value: {\"list-style-type\": \"lower-roman\"}\n                                    },\n                                    {start: \"---\", replacement: \"<hr/>\"},\n                                    {start: \"--\", replacement: \"—\"},\n                                    {start: \"-\", replacement: \"—\"},\n                                    {start: \"(c)\", replacement: \"©\"},\n                                    {start: \"//brb\", replacement: \"Be Right Back\"},\n                                    {\n                                        start: \"//heading\",\n                                        replacement:\n                                            '<h1 style=\"color: blue\">Heading here</h1> <h2>Author: Name here</h2> <p><em>Date: 01/01/2000</em></p> <hr />'\n                                    }\n                                ],\n                                plugins:\n                                    \"tabfocus textpattern image paste link lists table imagetools codesample advlist wordcount\",\n                                toolbar:\n                                    \"undo redo | bold italic formatselect | forecolor backcolor | alignleft aligncenter alignright  alignjustify | bullist numlist | image | link | codesample| wordcount\",\n                                toolbar_location: 'bottom',\n                                toolbar_mode: 'sliding',\n                            },\n                            skin_url: \"http://static.muxixyz.com/workbench/skins/ui/oxide\",\n                        }}\n                        onEditorChange={this.handleEditorChange}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}